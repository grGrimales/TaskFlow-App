<!-- src/app/components/task-dialog/task-dialog.component.html -->
<div class="p-6">
  <form [formGroup]="form" (ngSubmit)="onSave()">
    <!-- Título -->
    <mat-form-field appearance="outline" class="w-full">
      <mat-label>Título de la Tarea</mat-label>
      <input matInput formControlName="title" required>
    </mat-form-field>

    <!-- Descripción -->
    <mat-form-field appearance="outline" class="w-full mt-4">
      <mat-label>Descripción</mat-label>
      <textarea matInput formControlName="description" rows="4"></textarea>
    </mat-form-field>

    <!-- Asignar Miembros -->
    <div class="mt-4">
      <h3 class="text-lg font-medium text-gray-700 mb-2">Asignar a:</h3>
      <!-- CORRECCIÓN: Se ha eliminado la propiedad [compareWith] -->
      <mat-selection-list #userList (selectionChange)="onSelectionChange(userList.selectedOptions.selected)">
        <mat-list-option *ngFor="let member of boardMembers" [value]="member._id" [selected]="selectedUserIds.includes(member._id)">
          {{ member.name }} ({{ member.email }})
        </mat-list-option>
      </mat-selection-list>
    </div>

    <!-- Botones de Acción -->
    <div class="flex justify-end space-x-4 mt-6">
      <button mat-stroked-button type="button" (click)="onCancel()">Cancelar</button>
      <button mat-flat-button color="primary" type="submit" [disabled]="form.invalid">Guardar Cambios</button>
    </div>
  </form>
</div>
